# Configuration Apache pour le backend PHP
RewriteEngine On

# Rediriger les requêtes API avec ID (ex: /api/training-programs/1) vers le fichier PHP (ex: /api/training-programs.php)
# Cette règle capture aussi les ressources avec tirets
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.+)/([0-9]+)$ api/$1.php [L,QSA]

# Rediriger les requêtes API sans ID (ex: /api/auth) vers le fichier PHP (ex: /api/auth.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.+)$ api/$1.php [L,QSA]

# Si index.php est appelé avec /api/*, laisser index.php gérer le routage
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_URI} ^/Tbc_Groupe/backend/index\.php
RewriteRule ^(.*)$ index.php [L]

# Protéger les fichiers de configuration
<FilesMatch "^(config|\.htaccess)">
    Order Allow,Deny
    Deny from all
</FilesMatch>

